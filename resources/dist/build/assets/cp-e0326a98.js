function f(s,e,t,d,r,l,o,c){var a=typeof s=="function"?s.options:s;e&&(a.render=e,a.staticRenderFns=t,a._compiled=!0),d&&(a.functional=!0),l&&(a._scopeId="data-v-"+l);var i;if(o?(i=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__<"u"&&(n=__VUE_SSR_CONTEXT__),r&&r.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(o)},a._ssrRegister=i):r&&(i=c?function(){r.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:r),i)if(a.functional){a._injectStyles=i;var h=a.render;a.render=function(p,_){return i.call(_),h(p,_)}}else{var u=a.beforeCreate;a.beforeCreate=u?[].concat(u,i):[i]}return{exports:s,options:a}}const v={computed:{dateOptions(){let s=JSON.parse(this.dates),e=[];for(let t in s)e.push({label:s[t],value:t});return e},download(){return cp_url("utilities/statamic-logger/download/"+this.date)}},data(){return{date:null,entries:[],loading:!0,requestUrl:cp_url("utilities/statamic-logger"),page:1,perPage:25,resource:null,userFullDetails:!1,_source:null}},methods:{request(){this.date&&(this.loading=!0,this.$data._source&&this.$data._source.cancel(),this.$data._source=this.$axios.CancelToken.source(),this.$axios.get(this.requestUrl,{params:{date:this.date,page:this.page,perPage:this.perPage},cancelToken:this.$data._source.token}).then(s=>{this.resource=s.data}).catch(s=>{this.$axios.isCancel(s)||this.$toast.error(s.response?s.response.data.message:__("Something went wrong"),{duration:null})}).finally(()=>{this.loading=!1}))},selectPage(s){this.page=s,this.request()},selectPerPage(s){this.perPage=s,this.selectPage(1)}},mounted(){this.dateOptions.length>0&&(this.date=this.dateOptions[0].value)},props:{breadcrumbUrl:{type:String,required:!0},dates:{type:Object,required:!0},title:{type:String,required:!0}},watch:{date(s,e){s!==e&&(this.page=1,this.request())}}};var g=function(){var d;var e=this,t=e._self._c;return t("div",[t("header",{staticClass:"mb-6"},[t("breadcrumb",{attrs:{url:e.breadcrumbUrl,title:e.__("Utilities")}}),t("div",{staticClass:"flex items-center"},[t("h1",{staticClass:"flex-1",domProps:{textContent:e._s(e.title)}})]),t("div",{staticClass:"mt-6 flex items-center space-x-3"},[t("div",[t("select-input",{attrs:{placeholder:!1,options:e.dateOptions},model:{value:e.date,callback:function(r){e.date=r},expression:"date"}})],1),t("a",{staticClass:"btn",class:{"pointer-events-none opacity-50 disabled":!e.date},attrs:{href:e.download,target:"_blank"}},[e._v("Download ")]),t("label",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userFullDetails,expression:"userFullDetails"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.userFullDetails)?e._i(e.userFullDetails,null)>-1:e.userFullDetails},on:{change:function(r){var l=e.userFullDetails,o=r.target,c=!!o.checked;if(Array.isArray(l)){var a=null,i=e._i(l,a);o.checked?i<0&&(e.userFullDetails=l.concat([a])):i>-1&&(e.userFullDetails=l.slice(0,i).concat(l.slice(i+1)))}else e.userFullDetails=c}}}),e._v(" Show full user details? ")])])],1),t("div",[t("div",{staticClass:"card overflow-hidden p-0 relative"},[t("div",{staticClass:"overflow-auto"},[(d=e.resource)!=null&&d.data?t("table",{staticClass:"data-table"},[t("thead",[t("tr",[t("th",[e._v(e._s(e.__("Date")))]),t("th",[e._v(e._s(e.__("User")))]),t("th",[e._v(e._s(e.__("Type")))]),t("th",[e._v(e._s(e.__("Details")))])])]),t("tbody",e._l(e.resource.data,function(r,l){return t("tr",{key:l},[t("td",{staticClass:"whitespace-nowrap",staticStyle:{width:"1%"}},[e._v(e._s(r.date))]),t("td",{staticClass:"whitespace-nowrap",staticStyle:{width:"1%"}},[t("div",{staticClass:"flex items-center space-x-2"},[t("avatar",{staticClass:"w-8 h-8",attrs:{user:r.user}}),e.userFullDetails?t("div",[t("div",[e._v(e._s(r.user.name))]),t("div",{staticClass:"text-xs"},[e._v(e._s(r.user.id))])]):e._e()],1)]),t("td",{staticClass:"whitespace-nowrap",staticStyle:{width:"1%"}},[e._v(e._s(r.type))]),t("td",[t("div",{domProps:{innerHTML:e._s(r.detail)}})])])}),0)]):e._e()])])]),e.resource?t("data-list-pagination",{staticClass:"mt-6",attrs:{"resource-meta":e.resource,"per-page":e.perPage,"show-totals":!0},on:{"page-selected":e.selectPage,"per-page-changed":e.selectPerPage}}):e._e()],1)},m=[],C=f(v,g,m,!1,null,null,null,null);const b=C.exports;Statamic.booting(()=>{Statamic.$components.register("statamic-logger-viewer",b)});
